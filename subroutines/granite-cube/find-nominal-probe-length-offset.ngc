o<find-nominal-probe-length-offset> sub

#<maxPlunge> = #1
#<toolNumber> = #2
#<probeTipDiameter> = #3

#<nominalDistFromTableToTopFace> = 60.6

M70

M429

G20 
G90 G94 G40 G17 G91.1

G53 G0 Z0
G49

G90 G1 F60 X0 Y0

o<probe-relative> call [0] [0] [#<maxPlunge>] [#<_ini[TOOL_PROBE]FEED_FAST>] [#<_ini[TOOL_PROBE]FEED_BACK>] [#<_ini[TOOL_PROBE]FEED_SLOW>]

M72

#<zOffset> = [ #<_probedRelativeZ> - #<nominalDistFromTableToTopFace> / 25.4 - #<probeTipDiameter> * .5 ]
G10 L1 P#<toolNumber> Z#<zOffset>
G43 H#<toolNumber>

o<find-nominal-probe-length-offset> endsub
